<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>Cat√°logo</title>
  <link rel="icon" href="/images/logo/favicon.png" type="image/png">
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/index.css" />
</head>

<body>
  <header>
    <%- include('partials/navbar') %>
  </header>

  <section class="hero">
    <img src="/images/carrousel1.png" alt="Imagen principal" style="width: 100%;" />
  </section>

  <% if (novedades.length> 0) { %>
    <section class="categoria-seccion">
      <h3 class="categoria-titulo">Novedades</h3>
      <div class="productos">
        <% novedades.forEach(producto=> {
          const variante = producto.variantes.find(v => v.destacado) || producto.variantes[0];
          %>
          <div class="producto producto-novedad">
            <a href="/producto/<%= producto.id %>?categoria=<%= producto.categoria %>">
              <img src="<%= variante.imagen %>" alt="<%= producto.nombre %>" />
            </a>
            <div class="producto-info-mobile">
              <h4>
                <%= producto.nombre %>
              </h4>
              <p class="solo-mobile">
                <%= producto.descripcion %>
              </p>
            </div>
          </div>
          <% }) %>
      </div>
    </section>
    <% } %>

      <main id="catalogo">
        <% Object.keys(productos).forEach(categoria=> { %>
          <section class="categoria-seccion">
            <h3 class="categoria-titulo">
              <%= categoria.charAt(0).toUpperCase() + categoria.slice(1) %>
            </h3>
            <div class="productos">
              <% productos[categoria].forEach(producto=> { %>
                <div class="producto">
                  <a href="/producto/<%= producto.id %>?categoria=<%= categoria %>">
                    <img src="<%= producto.variantes[0].imagen %>" alt="<%= producto.nombre %>" />
                  </a>
                  <div class="producto-info-mobile">
                    <h4>
                      <%= producto.nombre %>
                    </h4>
                    <p class="solo-mobile">
                      <%= producto.descripcion %>
                    </p>
                  </div>
                </div>
                <% }) %>
            </div>
          </section>
          <% }) %>
      </main>

      <%- include('partials/whatsapp') %>

        <%- include('partials/footer') %>

          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const toggleButton = document.getElementById("navbar-toggle");
              const navbarMenu = document.querySelector(".navbar-menu");

              toggleButton.addEventListener("click", () => {
                navbarMenu.classList.toggle("active");
              });
            });
          </script>
</body>

</html>