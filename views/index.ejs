<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>Cat√°logo</title>
  <link rel="icon" href="/images/logo/favicon.png" type="image/png">
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/index.css" />
</head>

<body>
  <header>
    <%- include('partials/navbar') %>
  </header>

  <section class="hero-carousel">
    <div class="carousel-slider">
      <div class="carousel-track">
        <div class="carousel-item"><img src="/images/carrousel1.png" alt="1"></div>
        <div class="carousel-item"><img src="/images/bg1.png" alt="2"></div>
        <div class="carousel-item"><img src="/images/carrousel1.png" alt="3"></div>
      </div>
  
      <button class="carousel-btn prev">&#10094;</button>
      <button class="carousel-btn next">&#10095;</button>
  
      <div class="carousel-indicators">
        <span class="dot active" data-index="0"></span>
        <span class="dot" data-index="1"></span>
        <span class="dot" data-index="2"></span>
      </div>
    </div>
  </section>
  
  

  <% if (novedades.length> 0) { %>
    <section class="categoria-seccion">
      <h3 class="categoria-titulo">Novedades</h3>
      <div class="productos">
        <% novedades.forEach(producto=> {
          const variante = producto.variantes.find(v => v.destacado) || producto.variantes[0];
          %>
          <div class="producto producto-novedad">
            <a href="/producto/<%= producto.id %>?categoria=<%= producto.categoria %>">
              <img src="<%= variante.imagen %>" alt="<%= producto.nombre %>" />
            </a>
            <div class="producto-info-mobile">
              <h4>
                <%= producto.nombre %>
              </h4>
              <p class="solo-mobile">
                <%= producto.descripcion %>
              </p>
            </div>
          </div>
          <% }) %>
      </div>
    </section>
    <% } %>

      <main id="catalogo">
        <% Object.keys(productos).forEach(categoria=> { %>
          <section class="categoria-seccion">
            <h3 class="categoria-titulo">
              <%= categoria.charAt(0).toUpperCase() + categoria.slice(1) %>
            </h3>
            <div class="productos">
              <% productos[categoria].forEach(producto=> { %>
                <div class="producto">
                  <a href="/producto/<%= producto.id %>?categoria=<%= categoria %>">
                    <img src="<%= producto.variantes[0].imagen %>" alt="<%= producto.nombre %>" />
                  </a>
                  <div class="producto-info-mobile">
                    <h4>
                      <%= producto.nombre %>
                    </h4>
                    <p class="solo-mobile">
                      <%= producto.descripcion %>
                    </p>
                  </div>
                </div>
                <% }) %>
            </div>
          </section>
          <% }) %>
      </main>

      <%- include('partials/whatsapp') %>

        <%- include('partials/footer') %>

          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const toggleButton = document.getElementById("navbar-toggle");
              const navbarMenu = document.querySelector(".navbar-menu");

              toggleButton.addEventListener("click", () => {
                navbarMenu.classList.toggle("active");
              });
            });

            document.addEventListener("DOMContentLoaded", () => {
    const track = document.querySelector(".carousel-track");
    const items = document.querySelectorAll(".carousel-item");
    const prevBtn = document.querySelector(".carousel-btn.prev");
    const nextBtn = document.querySelector(".carousel-btn.next");
    const dots = document.querySelectorAll(".dot");

    let currentIndex = 0;

    function updateCarousel(index) {
      const slideWidth = items[0].clientWidth;
      track.style.transform = `translateX(-${slideWidth * index}px)`;

      dots.forEach(dot => dot.classList.remove("active"));
      dots[index].classList.add("active");
    }

    nextBtn.addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % items.length;
      updateCarousel(currentIndex);
    });

    prevBtn.addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + items.length) % items.length;
      updateCarousel(currentIndex);
    });

    dots.forEach(dot => {
      dot.addEventListener("click", () => {
        const index = parseInt(dot.dataset.index);
        currentIndex = index;
        updateCarousel(index);
      });
    });

    // Auto-slide
    setInterval(() => {
      currentIndex = (currentIndex + 1) % items.length;
      updateCarousel(currentIndex);
    }, 5000);

    // Init
    updateCarousel(0);
  });
          </script>
</body>

</html>